extends ./base

block content
    .jumbotron
      h2= "Barback is the best way to discover new cocktails (and remember old ones.)"
      p
        em barback (n) â€” a bartender's assistant; 
        they they are there to simplify a bartender's job; bussing tables and dishwashing are common duties. In some establishments, barbacks may also be responsible for the safety of the bartender.
      p.
        For connoisseurs and novices alike, filled to the brim with modern and classic cocktails.
      p.
        Happy bartending!

      p
        form(class="form-inline", method="post", target="popupwindow", onsubmit="window.open('https://tinyletter.com/Barback', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true", action="https://tinyletter.com/Barback")
          .input-group
            input(type="text", name="email", class="form-control input-lg", id="tlemail", placeholder="Email")
            .input-group-btn
              input(type="submit", class="btn btn-primary btn-lg", value="Email me about updates")
      p
        a(class="btn btn-primary btn-lg", href="https://itunes.apple.com/us/app/barback-classic-modern-cocktails/id829469529?mt=8") Check out our iPhone app
      .glyphicon.glyphicon-remove.topright.closebutton


    .row
      h4.col-xs-12.col-md-6= "Sort by:"
        a(id="name", href="#") Name
        a(id="abv", href="#") ABV
        a(id="complexity", href="#") Complexity
      .col-xs-12.col-md-6
        h4.pull-left= "Search for:"
        .form-inline
          input(id="search_filter", name="search", type="text", class="form-control", placeholder="Search for...")
    hr
    - function slugify(text) { return text.toString().toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]+/g, ''); }
    .row
      .recipes
        each recipe in message.recipes
          .recipe.text-center.col-xs-12.col-sm-6.col-md-4.col-lg-3.col-xl-2(data-abv="#{message.abv[recipe.attributes.name]}", data-name="#{recipe.attributes.name}", data-ingredients="#{message.bases[recipe.attributes.name]}")
            a(href="/recipe/" + recipe.attributes.slug)
              .recipe-container
                .row
                  span(class="ingredient pull-right")= recipe.attributes.name
                div(id="#{slugify(recipe.attributes.name)}")
                script.
                  drawRecipe("#{recipe.attributes.glassware}", !{JSON.stringify(message.visualData[recipe.attributes.name])}, "#{slugify(recipe.attributes.name)}")

      .greylay.col-xs-12.collapse

      #overlay.col-xs-5.col-xs-offset-7.text-center.collapse.overflow-y
        h1#data-recipe-name

        .align
          .col-xs-6.diagram
            #data-recipe-diagram
          .col-xs-6.deets
            h3#data-recipe-abv    
            h3#data-recipe-glassware
            h3#data-recipe-garnish

        .col-xs-6
          h2 Ingredients
          ul#data-recipe-ingredients

        .col-xs-6
          h2#data-recipe-directions-label Directions
          #data-recipe-directions

        .col-xs-12
          h2#data-recipe-information-label Information
          #data-recipe-information

        .col-xs-12
          h2 Share
          .text-center
            .fb-share-button(data-href="http://www.getbarback.com/", data-layout="box_count")
            &nbsp;&nbsp;
            a(href="https://twitter.com/share", class="twitter-share-button", data-via="getbarback", data-size="small", data-count="vertical") Tweet
            &nbsp;&nbsp;
            script !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
            .g-plusone(data-size="tall")

      #ingredient-overlay.col-xs-5.col-xs-offset-7.text-center.collapse.overflow-y
        h1#data-ingredient-name

        .align
          .col-xs-6.diagram
            #data-ingredient-diagram
          .col-xs-6.deets
            h3#data-ingredient-type    
            h3#data-ingredient-abv

        .col-xs-6
          h2 Recipes which use this:
          ul#data-ingredient-uses

        .col-xs-6
          h2#data-ingredient-brands-label Recommended brands:
          #data-ingredient-brands

        .col-xs-12
          h2#data-ingredient-information-label Information
          #data-ingredient-information

        .col-xs-12
          h2 Share
          .text-center
            .fb-share-button(data-href="http://www.getbarback.com/", data-layout="box_count")
            &nbsp;&nbsp;
            a(href="https://twitter.com/share", class="twitter-share-button", data-via="getbarback", data-size="small", data-count="vertical") Tweet
            &nbsp;&nbsp;
            script !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
            .g-plusone(data-size="tall")


block script
  script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/2.1.1/isotope.pkgd.min.js")
  script(src="/static/js/vendor/cookie.js")
  script(src="/static/js/main.js")

