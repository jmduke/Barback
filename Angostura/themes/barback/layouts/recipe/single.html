{{ partial "layout/head.html" . }}
{{ partial "layout/header.html" . }}

<link rel="stylesheet" href="/css/recipe.css">

<div class="recipe" itemscope itemtype="http://schema.org/Recipe">
  <h1 itemprop="name">{{ .Params.name }}</h1>
  <div class="row">
    <div class="col-xs-12 col-md-6">
      <div class="card">
      <h2>Ingredients</h2>
      <table class="ingredients">
        {{ range .Params.ingredients }}
          {{ partial "recipe/ingredient.html" . }}
        {{ end }}
      </table>
      </div>
          {{ if .Params.directions }}
      <div class="card">
        <h2>Directions</h2>
        <p itemprop="recipeInstructions">{{ .Params.directions | markdownify }}</p>
      {{ end }}
      </div>

    <div class="card" style="text-align: center">
    {{ partial "components/tweet.html" . }}
    </div>

    </div>
    <div class="col-xs-12 col-md-6">

      <div class="card"  style="float: right; margin: 1em;">
      <div id="diagram" itemprop="image"></div>
      </div>

      <div class="card">
        <h2>Data</h2>
        <p>
          Served in {{ .Params.glassware }}
          <br /><span id='abv'></span>% ABV
          {{ if .Params.garnish }}
          <br />Garnish with {{ .Params.garnish }}
          {{ end }}
        </p>
      </div>
          {{ if .Params.information }}

      <div class="card">
        <h2>Information</h2>
        <p itemprop="description">{{ .Params.information | markdownify }}</p>
      </div>
      
      {{ if .Params.similar_recipes }}
        <div class="card">
          <h2>Similar Cocktails</h2>
          {{ range .Params.similar_recipes }}
          <a href="" class="similar-recipe">{{ . }}</a>
          {{ end }}
        </div>
      {{ end }}

    {{ end }}

    </div>
  </div>
</div>

<script>
  drawRecipe("{{ .Params.glassware }}", {{ .Params.ingredients }}, "diagram");
  $("#abv").html(abv({{ .Params.ingredients }}));

  $(".similar-recipe").each(function() {
    var recipeName = $(this).text();
    var recipeSlug = recipes[recipeName].slug;
    $(this).attr('href', "/recipe/" + recipeSlug);
  });
</script>

{{ partial "layout/footer.html" . }}